@model TripModel
<style>
    .form-group {
        font-size: 13px;
    }

    .textboxWidth {
        width: 120px;
    }
</style>
<script src="~/assets/js/jquery-3.2.1.min.js"></script>
<script>
     function DeletePriceList(tripId, personNumber) {
            if (confirm("هل انت متأكد من انك تريد الغاء هذا السجل")) {
                $.post('@Url.Content("~/Trip/DeletePriceList")', { person: personNumber, tripId: tripId}, function (result) {
                    if (result == 1) {
                        alert(" تم حذف الفترة ");
                        window.location.reload();
                    } else {
                        alert(" لم يتم حذف الفترة ");
                    }
                });
            }
        }
</script>
@Html.HiddenFor(a => a.Id)
@Html.HiddenFor(a => a.TripSectionId)
@Html.HiddenFor(a => a.IssueDate)
@Html.HiddenFor(a => a.ExpiryDate)
@Html.HiddenFor(a => a.Cities)
<div class="container-fluid">
    <div class="row clearfix">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="card">
                <div class="header">
                    <h2><strong>معالجة </strong> السجل</h2>
                    <ul class="header-dropdown">
                    </ul>
                </div>
                <div class="body">
                    <div class="row clearfix">

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">معلومات المدينة</h5>
                        </div>

                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.CityDesc)
                            <select class="form-control" name="CityId">
                                <option selected="selected" disabled="disabled">--الرجاء اختيار المدينة--</option>
                                @foreach (var item in Model.Cities)
                                {
                                    <option selected="@(item.Id  == Model.CityId)" value="@item.Id">@item.DescAr</option>
                                }
                            </select>
                            @Html.ValidationMessageFor(a => a.CityId, "", new { @style = "color:red;font-size:10px" })
                        </div>
                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">معلومات عن الخدمة</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.MobileNumber)
                                @Html.TextBoxFor(a => a.MobileNumber, new { @class = "form-control", @autocomplete = "off", @placeholder = "962xxxxxxxxx", @maxlength = 12 })
                                @Html.ValidationMessageFor(a => a.MobileNumber, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Name)
                                @Html.TextBoxFor(a => a.Name, new { @class = "form-control", @autocomplete = "off", @maxlength = 50 })
                                @Html.ValidationMessageFor(a => a.Name, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.LocationDesc)
                                @Html.TextBoxFor(a => a.LocationDesc, new { @class = "form-control", @autocomplete = "off", @maxlength = 20 })
                                @Html.ValidationMessageFor(a => a.LocationDesc, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Description)
                                @Html.TextAreaFor(a => a.Description, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.Description, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.Owner)
                            <select class="form-control" name="Owner">
                                <option selected="selected" disabled="disabled">--الرجاء اختيار نوع المالك--</option>
                                <option selected="@(Model.Owner.Trim() == "من المالك")" value="من المالك">من المالك</option>
                                <option selected="@(Model.Owner.Trim() == "من المسوق")" value="من المسوق">من المسوق</option>
                            </select>
                            @Html.ValidationMessageFor(a => a.Owner, "", new { @style = "color:red;font-size:10px" })
                        </div>


                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ExtraDetails)
                                @Html.TextAreaFor(a => a.ExtraDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ExtraDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ReservationDetails)
                                @Html.TextAreaFor(a => a.ReservationDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ReservationDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Location)
                                @Html.TextBoxFor(a => a.Location, new { @class = "form-control", @autocomplete = "off", @maxlength = 50 })
                                @*@Html.ValidationMessageFor(a => a.Location, "", new { @style = "color:red;font-size:10px" })*@
                            </div>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">تفاصيل الحجز</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.InsuranceAmt)
                                @Html.TextBoxFor(a => a.InsuranceAmt, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.InsuranceAmt, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.DepositAmt)
                                @Html.TextBoxFor(a => a.DepositAmt, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.DepositAmt, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.MaxPerson)
                                @Html.TextBoxFor(a => a.MaxPerson, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.MaxPerson, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsTrust)
                                <br />
                                @Html.CheckBoxFor(a => a.IsTrust, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>


                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsOffer)
                                <br />
                                @Html.CheckBoxFor(a => a.IsOffer, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>



                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsApprove)
                                <br />
                                @Html.CheckBoxFor(a => a.IsApprove, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>


                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">الاسعار</h5>
                        </div>
                        

                        <div class="col-sm-12">
                            <!-- Edit only -->
                            @if (Model.Id > 0)
                            {
                                <button type="button" onclick="window.location.href='@Url.Content("~/Trip/TripPriceList?tripId=")@Model.Id'" class="btn btn-primary btn-round">اضافة اسعار جديدة</button>
                            }
                        </div>
                        <div style="margin:0 10px">
                            <div class="row clearfix">
                                @if (Model.PriceList != null)
                                {
                                    @for (int i = 0; i < Model.PriceList.OrderBy(c => c.Person).Count(); i++)
                                    {
                                        <div class="tab-pane table-responsive active" id="All" style="width:99% !important">
                                            <table class="table m-b-0 table-hover">
                                                <thead>
                                                    @if (i > 0 && Model.PriceList[i].Person != Model.PriceList[i - 1].Person)
                                                    {
                                                        <tr>
                                                            <th colspan="2">@Model.PriceList[i].Person عدد الاشخاص المسموح بهم</th>
                                                            <th>
                                                                <button type="button" id="btnDeletePriceList" onclick="DeletePriceList(@Model.PriceList[i].TripId,@Model.PriceList[i].Person);" class="btn btn-danger btn-round">حذف</button>
                                                            </th>
                                                        </tr>
                                                    }


                                                    @if (i == 0)
                                                    {

                                                        <tr>
                                                            <th>السعر</th>
                                                            <th>سعر العرض</th>
                                                            <th>حذف الفترة</th>
                                                        </tr>
                                                        <tr>
                                                            <th colspan="2">@Model.PriceList[i].Person عدد الاشخاص المسموح بهم</th>
                                                            <th>
                                                                <button type="button" id="btnDeletePriceList" onclick="DeletePriceList(@Model.PriceList[i].TripId,@Model.PriceList[i].Person);" class="btn btn-danger btn-round">حذف</button>
                                                            </th>
                                                        </tr>
                                                    }

                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        @Html.HiddenFor(a => Model.PriceList[i].Id)
                                                        @Html.HiddenFor(a => Model.PriceList[i].TripId)
                                                        @Html.HiddenFor(a => Model.PriceList[i].Person)
                                                        <td style="width:33.3%">
                                                            @Html.TextBoxFor(a => Model.PriceList[i].Price, new { @placeholder = "السعر", @max = 999, @type = "number", @required = "required", @class = "textboxWidth" })
                                                        </td>
                                                        <td style="width:33.3%">
                                                            @Html.TextBoxFor(a => Model.PriceList[i].OfferPrice, new { @placeholder = "سعر العرض ان اوجد", @max = 999, @type = "number", @required = "required", @class = "textboxWidth" })
                                                        </td>
                                                        <td style="width:33.3%">
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    }
                                }

                            </div>
                        </div>



                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">المرافق العامة</h5>
                        </div>
                        <div class="row clearfix">
                            @for (int i = 0; i < Model.ExtraFeature.Count; i++)
                            {
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        @Html.HiddenFor(a => a.ExtraFeature[i].Id)
                                        @Html.HiddenFor(a => a.ExtraFeature[i].TypeId)
                                        @Html.DisplayFor(a => a.ExtraFeature[i].DescAr)
                                        <br />
                                        @Html.CheckBoxFor(a => a.ExtraFeature[i].IsCheck, new { @class = "form-control", @style = "margin-top: 10px;" })
                                        @Html.TextBoxFor(a => a.ExtraFeature[i].ExtraText, new { @class = "form-control", @maxlength = 10 })
                                    </div>
                                </div>
                            }
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">اضافه صور</h5>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            @Html.TextBoxFor(model => model.Images, new { type = "file", multiple = "" })
                            @Html.ValidationMessageFor(model => model.Images, "", new { @class = "text-danger" })
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">اضافه فيدوهات</h5>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            @Html.TextBoxFor(model => model.Videos, new { type = "file", multiple = "" })
                            @Html.ValidationMessageFor(model => model.Videos, "", new { @class = "text-danger" })
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <button type="submit" class="btn btn-primary btn-round">حفظ</button>
                            <button type="button" onclick="window.location.href='@Url.Content("~/Trip/index?tripSectionId=")@Model.TripSectionId'" class="btn btn-default btn-round btn-simple">رجوع</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
