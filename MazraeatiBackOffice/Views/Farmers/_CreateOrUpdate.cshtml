@model FarmerModel
<style>
    .form-group {
        font-size: 13px;
    }

    .textboxWidth {
        width: 120px;
    }
    /* Style for displaying images */
    .farmer-image-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 15px;
        margin-bottom: 20px;

    }

    .farmer-image-item {
        position: relative;
        border: 1px solid #ddd;
        padding: 5px;
        border-radius: 5px;
    }

        .farmer-image-item img {
            width: 150px; /* Adjust as needed */
            height: 100px; /* Adjust as needed */
            object-fit: cover;
            display: block;
        }

    .delete-image-btn {
        position: absolute;
        top: 0px;
        right: 0px;
        background-color: rgba(255, 0, 0, 0.7);
        color: white;
        border: none;
        border-radius: 0 5px 0 5px;
        cursor: pointer;
        font-size: 14px;
        padding: 2px 6px;
    }

    img {
        max-width: 50% !important;
        /* border-radius: 1px; */
    }
    /* ... Your existing styles ... */
    /* Added for visual consistency of removed item */
    .farmer-image-item.removing,
    .farmer-video-item.removing {
        opacity: 0;
        transition: opacity 0.3s ease-out; /* Smooth fade out */
    }

</style>

<script src="~/assets/js/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
     // Helper function for showing SweetAlerts
    function showSweetAlert(icon, title, text) {
        Swal.fire({
            icon: icon,
            title: title,
            text: text,
            customClass: {
                confirmButton: 'btn btn-primary' // Example of custom class for button
            },
            buttonsStyling: false // Disable default styling for custom classes
        });
    }

     function DeletePriceList(farmerId, personNumber) {
            if (confirm("هل انت متأكد من انك تريد الغاء هذا السجل")) {
                $.post('@Url.Content("~/Farmers/DeletePriceList")', { person: personNumber , farmerId: farmerId}, function (result) {
                    if (result == 1) {
                        alert(" تم حذف الفترة ");
                        window.location.reload();
                    } else {
                        alert(" لم يتم حذف الفترة ");
                    }
                });
            }
        }

    function DeleteFarmerImage(imageId) {
        if (true) { // Replaced confirm with true for Canvas environment. Use a custom modal for production.
            console.log("Attempting to delete image with ID:", imageId);
            $.post('@Url.Content("~/Farmers/DeleteFarmerImage")', { imageId: imageId }, function (response) {
                // Expecting a JSON response like { success: true, message: "..." }
                if (response.success) {
                    console.log("تم حذف الصورة بنجاح:", response.message); // Replaced alert
                    // Instead of full reload, you can remove the element directly for better UX
                    $(`button[onclick="DeleteFarmerImage(${imageId})"]`).closest('.farmer-image-item').remove();
                } else {
                    console.error("فشل حذف الصورة:", response.message); // Replaced alert
                }
            }).fail(function (jqXHR, textStatus, errorThrown) {
                console.error("AJAX Error deleting image:", textStatus, errorThrown, jqXHR.responseText);
            });
        }
    }

    function DeleteFarmerVideo(videoId) {
        if (true) { // Replaced confirm with true for Canvas environment. Use a custom modal for production.
            console.log("Attempting to delete image with ID:", videoId);
            $.post('@Url.Content("~/Farmers/DeleteFarmerVideo")', { videoId: videoId }, function (response) {
                // Expecting a JSON response like { success: true, message: "..." }
                if (response.success) {
                    console.log("تم حذف الفيديو بنجاح:", response.message); // Replaced alert
                    // Instead of full reload, you can remove the element directly for better UX
                    $(`button[onclick="DeleteFarmerVideo(${videoId})"]`).closest('.farmer-video-item').remove();
                } else {
                    console.error("فشل حذف الفيديو:", response.message); // Replaced alert
                }
            }).fail(function (jqXHR, textStatus, errorThrown) {
                console.error("AJAX Error deleting Video:", textStatus, errorThrown, jqXHR.responseText);
            });
        }
    }
    // function DeleteFarmerVideo(videoId) {
    //     if (true) { // Replaced confirm with true for Canvas environment. Use a custom modal for production.
    //         alert.log("Attempting to delete video with ID:", videoId);
    //         $.post('@Url.Content("~/Farmers/DeleteFarmerVideo")', { videoId: videoId }, function (response) {
    //             // Expecting a JSON response like { success: true, message: "..." }
    //             if (response.success) {
    //                 alert.log("تم حذف الفيديو بنجاح:", response.message); // Replaced alert
    //                 // Instead of full reload, you can remove the element directly for better UX
    //                 $(`button[onclick="DeleteFarmerVideo(${videoId})"]`).closest('.farmer-video-item').remove();
    //             } else {
    //                 alert.error("فشل حذف الفيديو:", response.message); // Replaced alert
    //             }
    //         }).fail(function (jqXHR, textStatus, errorThrown) {
    //             alert.error("AJAX Error deleting video:", textStatus, errorThrown, jqXHR.responseText);
    //         });
    //     }
    // }
    // function DeleteFarmerVideo(videoId) {
    //     Swal.fire({
    //         title: 'هل أنت متأكد؟',
    //         text: "هل أنت متأكد من أنك تريد حذف هذا الفيديو؟",
    //         icon: 'warning', // Shows a warning icon
    //         showCancelButton: true, // Displays the cancel button
    //         confirmButtonText: 'نعم، احذف!', // Text for the confirmation button
    //         cancelButtonText: 'إلغاء', // Text for the cancel button
    //         reverseButtons: true, // Reverses the order of confirm and cancel buttons (good for RTL languages)
    //         customClass: { // Apply custom CSS classes to buttons for styling (e.g., Bootstrap classes)
    //             confirmButton: 'btn btn-danger mx-1', // Red button with margin
    //             cancelButton: 'btn btn-secondary mx-1' // Grey button with margin
    //         },
    //         buttonsStyling: false // Important: disables SweetAlert's default button styling to use custom classes
    //     }).then((result) => {
    //         // This 'then' block executes after the user makes a choice in the SweetAlert dialog
    //         if (result.isConfirmed) {
    //             // User clicked 'Yes, delete!'

    //             // 1. Get the DOM element to remove immediately (visual feedback)
    //             // We use the data-video-id attribute added to the video item div
    //             const $itemToRemove = $(`.farmer-video-item[data-video-id="${videoId}"]`);
    //             $itemToRemove.addClass('removing'); // Add a class to apply a fade-out animation (defined in CSS)

    //             // 2. Make the AJAX call to the server to perform the actual deletion
    //             $.post('@Url.Content("~/Farmers/DeleteFarmerVideo")', { videoId: videoId }, function (response) {
    //                 // This callback function executes when the server responds
    //                 if (response.success) {
    //                     // Deletion was successful on the server
    //                     showSweetAlert('success', 'تم الحذف!', response.message); // Show success message

    //                     // Remove the element from the DOM after a short delay
    //                     // This allows the 'removing' CSS transition to complete before removal
    //                     setTimeout(() => {
    //                         $itemToRemove.remove(); // Removes the video item from the page
    //                     }, 300); // 300ms delay, match this to your CSS transition duration

    //                 } else {
    //                     // Deletion failed on the server (response.success is false)
    //                     showSweetAlert('error', 'خطأ!', response.message); // Show error message from server
    //                     $itemToRemove.removeClass('removing'); // If deletion fails, remove the fade-out class
    //                 }
    //             }).fail(function (jqXHR, textStatus, errorThrown) {
    //                 // This 'fail' callback executes if the AJAX request itself fails (e.g., network error, 404, 500)
    //                 showSweetAlert('error', 'خطأ في الاتصال!', 'حدث خطأ أثناء الاتصال بالخادم: ' + errorThrown);
    //                 console.error("AJAX Error deleting video:", textStatus, errorThrown, jqXHR.responseText); // Log detailed error
    //                 $itemToRemove.removeClass('removing'); // If AJAX fails, remove the fade-out class
    //             });
    //         } else if (result.dismiss === Swal.DismissReason.cancel) {
    //             // User clicked 'Cancel' or dismissed the dialog (e.g., by pressing Esc or clicking outside)
    //             showSweetAlert('info', 'تم الإلغاء', 'لم يتم حذف الفيديو.'); // Show info message
    //         }
    //     });
    // }
    function showSweetAlert(icon, title, text) {
        Swal.fire({
            icon: icon,
            title: title,
            text: text,
            customClass: {
                confirmButton: 'btn btn-primary'
            },
            buttonsStyling: false
        });
    }


    // New JavaScript for file previews
    $(document).ready(function () {
        // Handle Image Previews
        $('#Images').on('change', function (e) {
            $('#imagePreviews').empty(); // Clear previous previews
            const files = e.target.files;
            if (files.length === 0) return;

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (!file.type.startsWith('image/')) {
                    continue; // Skip non-image files
                }

                const reader = new FileReader();
                reader.onload = function (e) {
                    const previewItem = `
                            <div class="preview-item">
                                <img src="${e.target.result}" alt="Image Preview" style="width:200px">
                                <button type="button" class="remove-preview-btn" data-index="${i}">X</button>
                            </div>
                        `;
                    $('#imagePreviews').append(previewItem);
                };
                reader.readAsDataURL(file);
            }
        });

        // Handle Video Previews
        $('#Videos').on('change', function (e) {
            $('#videoPreviews').empty(); // Clear previous previews
            const files = e.target.files;
            if (files.length === 0) return;

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (!file.type.startsWith('video/')) {
                    continue; // Skip non-video files
                }

                const reader = new FileReader();
                reader.onload = function (e) {
                    const previewItem = `
                            <div class="preview-item">
                                <video controls style="width:250px">
                                    <source src="${e.target.result}" type="${file.type}">
                                    Your browser does not support the video tag.
                                </video>
                                <button type="button" class="remove-preview-btn" data-index="${i}">X</button>
                            </div>
                        `;
                    $('#videoPreviews').append(previewItem);
                };
                reader.readAsDataURL(file);
            }
        });

        // Handle removal of previewed items
        $(document).on('click', '.remove-preview-btn', function () {
            const $itemToRemove = $(this).closest('.preview-item');
            const indexToRemove = $(this).data('index'); // This identifies the position in the original file list

            // Find the parent container (image or video previews)
            const $parentContainer = $itemToRemove.parent();
            const inputId = $parentContainer.attr('id') === 'imagePreviews' ? 'Images' : 'Videos';
            const fileInput = document.getElementById(inputId);

            // Remove the item from the displayed previews
            $itemToRemove.remove();

            // IMPORTANT: Create a new DataTransfer object to modify the file list
            const dataTransfer = new DataTransfer();
            const currentFiles = Array.from(fileInput.files);

            currentFiles.forEach((file, index) => {
                if (index !== indexToRemove) {
                    dataTransfer.items.add(file);
                }
            });

            // Update the file input's files property
            fileInput.files = dataTransfer.files;

            // Re-index remaining preview buttons if necessary (for visual consistency,
            // though the core logic relies on the DataTransfer object)
            $parentContainer.find('.remove-preview-btn').each(function (idx) {
                $(this).data('index', idx);
            });
        });
    });
</script>
@Html.HiddenFor(a => a.Id)
@Html.HiddenFor(a => a.Number)
@Html.HiddenFor(a => a.IssueDate)
@Html.HiddenFor(a => a.ExpiryDate)
@Html.HiddenFor(a => a.Countries)
@Html.HiddenFor(a => a.Cities)
<div class="container-fluid">
    <div class="row clearfix">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="card">
                <div class="header">
                    <h2><strong>معالجة </strong> السجل</h2>
                    <ul class="header-dropdown">
                    </ul>
                </div>
                <div class="body">
                    <div class="row clearfix">

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">معلومات الدولة والمدينة</h5>
                        </div>

                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.CountryDesc)
                            <select class="form-control" name="CountryId">
                                <option selected="selected" disabled="disabled">--الرجاء اختيار الدوله--</option>
                                @foreach (var item in Model.Countries)
                                {
                                    <option selected="@(item.Id  == Model.CountryId)" value="@item.Id">@item.DescAr</option>
                                }
                            </select>
                            @Html.ValidationMessageFor(a => a.CountryId, "", new { @style = "color:red;font-size:10px" })
                        </div>
                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.CityDesc)
                            <select class="form-control" name="CityId">
                                <option selected="selected" disabled="disabled">--الرجاء اختيار المدينة--</option>
                                @foreach (var item in Model.Cities)
                                {
                                    <option selected="@(item.Id  == Model.CityId)" value="@item.Id">@item.DescAr</option>
                                }
                            </select>
                            @Html.ValidationMessageFor(a => a.CityId, "", new { @style = "color:red;font-size:10px" })
                        </div>
                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">معلومات عن المزرعة</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Name)
                                @Html.TextBoxFor(a => a.Name, new { @class = "form-control", @autocomplete = "off", @maxlength = 50 })
                                @Html.ValidationMessageFor(a => a.Name, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.NameEn)
                                @Html.TextBoxFor(a => a.NameEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 50 })
                                @Html.ValidationMessageFor(a => a.NameEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.LocationDesc)
                                @Html.TextBoxFor(a => a.LocationDesc, new { @class = "form-control", @autocomplete = "off", @maxlength = 20 })
                                @Html.ValidationMessageFor(a => a.LocationDesc, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.LocationDescEn)
                                @Html.TextBoxFor(a => a.LocationDescEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 20 })
                                @Html.ValidationMessageFor(a => a.LocationDescEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.MobileNumber)
                                @Html.TextBoxFor(a => a.MobileNumber, new { @class = "form-control", @autocomplete = "off", @placeholder = "962xxxxxxxxx", @maxlength = 12 })
                                @Html.ValidationMessageFor(a => a.MobileNumber, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        @*@if (Model.Id > 0)
                        {
                        <div class="col-sm-6">
                        <div class="form-group">
                        @Html.DisplayNameFor(a => a.Number)
                        @Html.TextBoxFor(a => a.Number, new { @class = "form-control", @autocomplete = "off" })
                        @Html.ValidationMessageFor(a => a.Number, "", new { @style = "color:red;font-size:10px" })
                        </div>
                        </div>
                        }*@
                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.Owner)
                            <select class="form-control" name="Owner">
                                <option selected="selected" disabled="disabled">--الرجاء اختيار نوع المالك--</option>
                                <option selected="@(Model.Owner.Trim() == "من المالك")" value="من المالك">من المالك</option>
                                <option selected="@(Model.Owner.Trim() == "من المسوق")" value="من المسوق">من المسوق</option>
                            </select>
                            @Html.ValidationMessageFor(a => a.Owner, "", new { @style = "color:red;font-size:10px" })
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Description)
                                @Html.TextBoxFor(a => a.Description, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.Description, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.DescriptionEn)
                                @Html.TextBoxFor(a => a.DescriptionEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.DescriptionEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                       



                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">تفاصيل العقار</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.EStateArea)
                                @Html.TextBoxFor(a => a.EStateArea, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99999" })
                                @Html.ValidationMessageFor(a => a.EStateArea, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Room)
                                @Html.TextBoxFor(a => a.Room, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.Room, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.RoomDetails)
                                @Html.TextAreaFor(a => a.RoomDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.RoomDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.RoomDetailsEn)
                                @Html.TextAreaFor(a => a.RoomDetailsEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.RoomDetailsEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Bathroom)
                                @Html.TextBoxFor(a => a.Bathroom, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.Bathroom, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.BathroomDetails)
                                @Html.TextBoxFor(a => a.BathroomDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.BathroomDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.BathroomDetailsEn)
                                @Html.TextBoxFor(a => a.BathroomDetailsEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.BathroomDetailsEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Floor)
                                @Html.TextBoxFor(a => a.Floor, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.Floor, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.InDoor)
                                @Html.TextBoxFor(a => a.InDoor, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.InDoor, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.InDoorDescription)
                                @Html.TextAreaFor(a => a.InDoorDescription, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.InDoorDescription, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.InDoorDescriptionEn)
                                @Html.TextAreaFor(a => a.InDoorDescriptionEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.InDoorDescriptionEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.OutDoor)
                                @Html.TextBoxFor(a => a.OutDoor, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.OutDoor, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.OutDoorDescription)
                                @Html.TextAreaFor(a => a.OutDoorDescription, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.OutDoorDescription, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.OutDoorDescriptionEn)
                                @Html.TextAreaFor(a => a.OutDoorDescriptionEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.OutDoorDescriptionEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>


                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.kitchens)
                                @Html.TextBoxFor(a => a.kitchens, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "99" })
                                @Html.ValidationMessageFor(a => a.kitchens, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.kitchensDescription)
                                @Html.TextAreaFor(a => a.kitchensDescription, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.kitchensDescription, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.kitchensDescriptionEn)
                                @Html.TextAreaFor(a => a.kitchensDescriptionEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.kitchensDescriptionEn, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ExtraDetails)
                                @Html.TextAreaFor(a => a.ExtraDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ExtraDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ReservationDetails)
                                @Html.TextAreaFor(a => a.ReservationDetails, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ReservationDetails, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            @Html.DisplayNameFor(a => a.Family)
                            <select class="form-control" name="Family">
                                <option selected="selected" value="عائلات وشباب">عائلات وشباب</option>
                                <option value="عائلات فقط">عائلات فقط</option>
                            </select>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.Location)
                                @Html.TextBoxFor(a => a.Location, new { @class = "form-control", @autocomplete = "off", @maxlength = 50 })
                                @*@Html.ValidationMessageFor(a => a.Location, "", new { @style = "color:red;font-size:10px" })*@
                            </div>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">تفاصيل الحجز</h5>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.InsuranceAmt)
                                @Html.TextBoxFor(a => a.InsuranceAmt, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.InsuranceAmt, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.DepositAmt)
                                @Html.TextBoxFor(a => a.DepositAmt, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.DepositAmt, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.MaxPerson)
                                @Html.TextBoxFor(a => a.MaxPerson, new { @class = "form-control", @autocomplete = "off", @type = "number", @max = "9999" })
                                @Html.ValidationMessageFor(a => a.MaxPerson, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ConfidentialMessageAr)
                                @Html.TextBoxFor(a => a.ConfidentialMessageAr, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ConfidentialMessageAr, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.ConfidentialMessageEn)
                                @Html.TextBoxFor(a => a.ConfidentialMessageEn, new { @class = "form-control", @autocomplete = "off", @maxlength = 500 })
                                @Html.ValidationMessageFor(a => a.ConfidentialMessageAr, "", new { @style = "color:red;font-size:10px" })
                            </div>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsTrust)
                                <br />
                                @Html.CheckBoxFor(a => a.IsTrust, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsVIP)
                                <br />
                                @Html.CheckBoxFor(a => a.IsVIP, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsOffer)
                                <br />
                                @Html.CheckBoxFor(a => a.IsOffer, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsWinter)
                                <br />
                                @Html.CheckBoxFor(a => a.IsWinter, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                @Html.DisplayNameFor(a => a.IsApprove)
                                <br />
                                @Html.CheckBoxFor(a => a.IsApprove, new { @class = "form-control", @style = "margin-top: 10px;" })
                            </div>
                        </div>


                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">الاسعار</h5>
                        </div>
                        <button type="button" onclick="window.location.href='@Url.Content("~/Farmers/FarmerPriceList?farmerId=")@Model.Id'" class="btn btn-primary btn-round">اضافة اسعار جديدة</button>
                        <div style="margin:0 10px">
                            <div class="row clearfix">
                                @for (int i = 0; i < Model.PriceList.OrderBy(c => c.Person).ThenBy(n => n.Day).Count(); i++)
                                {
                                    <div class="tab-pane table-responsive active" id="All" style="width:99% !important">
                                        <table class="table m-b-0 table-hover">
                                            <thead>
                                                @if (i > 0 && Model.PriceList[i].Person != Model.PriceList[i - 1].Person)
                                                {
                                                    <tr>
                                                        <th colspan="9">@Model.PriceList[i].Person عدد الاشخاص المسموح بهم</th>
                                                        <th>
                                                            <button type="button" id="btnDeletePriceList" onclick="DeletePriceList(@Model.PriceList[i].FarmerId,@Model.PriceList[i].Person);" class="btn btn-danger btn-round">حذف</button>
                                                        </th>
                                                    </tr>
                                                }


                                                @if (i == 0)
                                                {
                                                    <tr>
                                                        <th>سعر الفتره الصباحية</th>
                                                        <th>سعر الفتره المسائية</th>
                                                        <th>سعر يوم كامل</th>
                                                        <th>سعر عرض الفتره الصباحية</th>
                                                        <th>سعر عرض الفتره المسائية</th>
                                                        <th>سعر عرض يوم كامل</th>
                                                        <th>الفترة الصباحية</th>
                                                        <th>الفترة المسائية</th>
                                                        <th>الفترة يوم كامل</th>
                                                        <th>حذف الفترة</th>
                                                    </tr>
                                                    <tr>
                                                        <th colspan="9">@Model.PriceList[i].Person عدد الاشخاص المسموح بهم</th>
                                                        <th>
                                                            <button type="button" id="btnDeletePriceList" onclick="DeletePriceList(@Model.PriceList[i].FarmerId,@Model.PriceList[i].Person);" class="btn btn-danger btn-round">حذف</button>
                                                        </th>
                                                    </tr>
                                                }

                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="10">
                                                        @switch (Model.PriceList[i].Day)
                                                        {
                                                            case 1:
                                                                @Html.Label("(الاحد)")
                                                                ;
                                                                break;
                                                            case 2:
                                                                @Html.Label("(الاثنين)")
                                                                ;
                                                                break;
                                                            case 3:
                                                                @Html.Label("(الثلاثاء)")
                                                                ;
                                                                break;
                                                            case 4:
                                                                @Html.Label("(الاربعاء)")
                                                                ;
                                                                break;
                                                            case 5:
                                                                @Html.Label("(الخميس)")
                                                                ;
                                                                break;
                                                            case 6:
                                                                @Html.Label("(الجمعه)")
                                                                ;
                                                                break;
                                                            case 7:
                                                                @Html.Label("(السبت)")
                                                                ;
                                                                break;
                                                        }
                                                    </td>
                                                </tr>
                                                <tr>
                                                    @Html.HiddenFor(a => Model.PriceList[i].Id)
                                                    @Html.HiddenFor(a => Model.PriceList[i].Day)
                                                    @Html.HiddenFor(a => Model.PriceList[i].FarmerId)
                                                    @Html.HiddenFor(a => Model.PriceList[i].Person)
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].MorningPrice, new { @placeholder = "سعر الفتره الصباحية", @max = 999, @type = "number", @required = "required", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].EveningPrice, new { @placeholder = "سعر الفتره المسائية", @max = 999, @type = "number", @required = "required", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].FullDayPrice, new { @placeholder = "سعر يوم كامل", @max = 999, @type = "number", @required = "required", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].OfferPrice, new { @placeholder = "سعر عرض الفترة الصباحية ان اوجد", @max = 999, @type = "number", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].OfferEveningPrice, new { @placeholder = "سعر عرض الفترة المسائية ان اوجد", @max = 999, @type = "number", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].OfferFullDayPrice, new { @placeholder = "سعر عرض يوم كامل ان اوجد", @max = 999, @type = "number", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].MorningPeriodText, new { @placeholder = " الفتره الصباحية", @maxlength = 25, @type = "text", @required = "required", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].EveningPeriodText, new { @placeholder = " الفتره المسائية", @maxlength = 25, @type = "text", @required = "required", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                        @Html.TextBoxFor(a => Model.PriceList[i].FullDayPeriodText, new { @placeholder = "يوم كامل", @maxlength = 25, @type = "text", @class = "textboxWidth" })
                                                    </td>
                                                    <td style="width:10%">
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                }
                            </div>
                        </div>


                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">المرافق العامة</h5>
                        </div>
                        <div class="row clearfix">
                            @for (int i = 0; i < Model.ExtraFeature.Count; i++)
                            {
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        @Html.HiddenFor(a => a.ExtraFeature[i].Id)
                                        @Html.HiddenFor(a => a.ExtraFeature[i].TypeId)
                                        @Html.HiddenFor(a => a.ExtraFeature[i].ExtraText)
                                        @Html.DisplayFor(a => a.ExtraFeature[i].ExtraText)
                                        <br />
                                        @Html.CheckBoxFor(a => a.ExtraFeature[i].IsCheck, new { @class = "form-control", @style = "margin-top: 10px;" })
                                        @Html.TextBoxFor(a => a.ExtraFeature[i].ExtraTextDescriptionAr, new { @class = "form-control", @maxlength = 100 ,@placeholder="الوصف بالعربي"})
                                        @Html.TextBoxFor(a => a.ExtraFeature[i].ExtraTextDescriptionEn, new { @class = "form-control", @maxlength = 100 ,@placeholder="الوصف بالانجليزيه"})
                                    </div>
                                </div>
                            }
                        </div>

                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">اضافه صور</h5>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            @Html.TextBoxFor(model => model.Images, new { type = "file", multiple = "" })
                            @Html.ValidationMessageFor(model => model.Images, "", new { @class = "text-danger" })
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            <div id="imagePreviews" class="farmer-image-container" width="200px">
                            </div>
                        </div>
                        @* Start of image display section *@
                        @if (Model.FarmerImages != null && Model.FarmerImages.Any())
                        {
                            <div class="col-sm-12" style="margin-bottom:20px">
                                <h3>الصور الحالية</h3>
                                <div class="farmer-image-container">
                                    @foreach (var image in Model.FarmerImages)
                                    {
                                        <div class="farmer-image-item">
                                            <img src="~/Images/@image.Url" alt="Farmer Image"  />
                                            <button type="button" class="delete-image-btn" onclick="DeleteFarmerImage(@image.Id)">X</button>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                        @* End of image display section *@





                        <div class="col-sm-12">
                            <h5 style="text-decoration:underline">اضافه فيدوهات</h5>
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>

                        <div class="col-sm-12">
                            @Html.TextBoxFor(model => model.Videos, new { type = "file", multiple = "" })
                            @Html.ValidationMessageFor(model => model.Videos, "", new { @class = "text-danger" })
                        </div>

                        <div class="col-sm-12" style="margin-bottom:20px">
                            &nbsp;
                        </div>
                        <div class="col-sm-12">
                            <div id="videoPreviews" class="farmer-video-container" style="width:250px">
                            </div>
                        </div>


                        @* Start of Video display section *@
                        @if (Model.FarmerVideos != null && Model.FarmerVideos.Any())
                        {
                            <div class="col-sm-12" style="margin-bottom:20px">
                                <h3>الفيديوهات الحالية</h3>
                                <div class="farmer-image-container">
                                    @foreach (var video in Model.FarmerVideos)
                                    {
                                        <div class="farmer-image-item">
                                            <video controls style="width:250px">
                                                <source src="~/Videos/@video.Url">
                                               
                                        </video>
                                            <button type="button" class="delete-image-btn" onclick="DeleteFarmerVideo(@video.Id)">X</button>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                        @* End of Video display section *@




                        <div class="col-sm-12">
                            <button type="submit" class="btn btn-primary btn-round">حفظ</button>
                            <button type="button" onclick="window.location.href='@Url.Content("~/Farmers/index/")'" class="btn btn-default btn-round btn-simple">رجوع</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


